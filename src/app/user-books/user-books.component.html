<p-toast></p-toast>
    <div class="obsah">
        <h1>Your Books</h1>
        <div class="book-items">
            @if (books.length === 0) {
                <p>Žádné knihy nenalezeny.</p>
              }
              
            @for (book of books; track book.id) {
                <div class="book-item">
                    <div class="book-text">{{ book.name }}</div>
                    <div class="book-buttons">
                        <!-- Oblíbená kniha -->
                        <button class="favorite-btn" title="Přidat do oblíbených">
                            <i class="bi bi-star"></i>
                        </button>
                        <!-- Pridat recenzi -->
                        <p-button (click)="openRatingForm(book)" class="favorite-btn" title="Poslat hodnocení" severity="success">
                            <ng-template pTemplate="icon">
                            <i class="bi bi-book"></i>
                            </ng-template> 
                        </p-button>
                        <!-- Smazat knihu -->
                        <p-button (onClick)="removeBook(book.bookid)" class="delete-btn" title="Smazat knihu" severity="danger">
                            <ng-template pTemplate="icon">
                                <i class="bi bi-trash"></i>
                            </ng-template>
                        </p-button>
                    </div>
                    
                    @if (showRatingForm && activeRatingBookId === book.bookid) {
                    <div class="overlay">
                        <div class="form-container">
                            <mat-form-field class="form-group" appearance="fill">
                                <mat-label>Hodnocení</mat-label>
                                <mat-select [formControl]="bookRating" required>
                                    <mat-option [value]="1">1</mat-option>
                                    <mat-option [value]="2">2</mat-option>
                                    <mat-option [value]="3">3</mat-option>
                                    <mat-option [value]="4">4</mat-option>
                                    <mat-option [value]="5">5</mat-option>
                                </mat-select>
                            </mat-form-field>

                            <mat-checkbox [formControl]="bookLike">
                                Chci přidat knihu do oblíbených
                            </mat-checkbox>

                            <div class="form-buttons">
                                <button mat-raised-button color="primary" class="submit-btn" (click)="sendRating(book)">Odeslat recenzi</button>
                                <button mat-raised-button color="warn" class="cancel-btn" (click)="showRatingForm = false; activeRatingBookId = null;">Zavřít</button>
                            </div>
                        </div>
                    </div>
                }
                </div>
            }
        </div>
    </div>

