<p-toast></p-toast>
    <div class="obsah">
        <h1>Your Books</h1>
        <div class="book-items">
            @if (books.length === 0) {
                <p>Žádné knihy nenalezeny.</p>
              }
              
            @for (book of books; track book.id) {
                <div class="book-item">
                    <div class="book-text">{{ book.name }}</div>
                    <div class="book-buttons">
                        <!-- Oblíbená kniha -->
                        <button class="favorite-btn" title="Přidat do oblíbených">
                            <i class="bi bi-star"></i>
                        </button>
                        <!-- Pridat recenzi -->
                        <p-button (click)="sendRating(book)" class="favorite-btn" title="Poslat hodnocení" severity="success">
                            <ng-template pTemplate="icon">
                            <i class="bi bi-book"></i>
                            </ng-template> 
                        </p-button>
                        <!-- Smazat knihu -->
                        <p-button (onClick)="removeBook(book.bookid)" class="delete-btn" title="Smazat knihu" severity="danger">
                            <ng-template pTemplate="icon">
                                <i class="bi bi-trash"></i>
                            </ng-template>
                        </p-button>
                    </div>
                    @if (activeRatingBookId === book.id) {
                    <form (ngSubmit)="sendRating(book)">
                        <label>Hodnocení (1-5):</label>
                        <input type="number" min="1" max="5" [formControl]="bookRating" required>
                        <label>
                        <input type="checkbox" [formControl]="bookLike">
                        Líbila se mi kniha
                        </label>
                        <button type="submit" class="btn btn-primary" [disabled]="bookRating.invalid">Odeslat recenzi</button>
                        <button type="button" class="btn btn-secondary" (click)="activeRatingBookId = null">Zavřít</button>
                    </form>
                    }
                </div>
            }
        </div>
    </div>

