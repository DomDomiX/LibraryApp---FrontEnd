<p-toast></p-toast>

<div class="login-container">
  <div class="login-card">
    <!-- Tlačítko zpět na homepage -->
    <div class="back-button">
      <p-button 
        icon="bi bi-arrow-left"
        label="Zpět na domov"
        severity="secondary"
        [outlined]="true"
        size="small"
        (onClick)="goToHomepage()">
      </p-button>
    </div>

    <div class="login-header">
      <i class="bi bi-book-half login-icon"></i>
      <h1>Knihovna</h1>
      <h2>{{ isRegistering ? 'Registrace' : 'Přihlášení' }}</h2>
    </div>

    @if (!isRegistering) {
      <!-- Přihlášení -->
      <div class="login-form">
        <div class="form-group">
          <label>E-mail</label>
          <input 
            type="email" 
            class="form-input"
            placeholder="Zadejte e-mail" 
            [formControl]="mailLogin">
        </div>

        <div class="form-group">
          <label>Heslo</label>
          <div class="password-input">
            <input 
              [type]="hide() ? 'password' : 'text'"
              class="form-input"
              placeholder="Zadejte heslo" 
              [formControl]="passwordLogin">
            <i 
              class="bi password-toggle"
              [class.bi-eye]="hide()"
              [class.bi-eye-slash]="!hide()"
              (click)="clickEvent($event)">
            </i>
          </div>
        </div>

        <p-button 
          label="Přihlásit se"
          severity="info"
          class="login-btn"
          [loading]="loggingIn"
          (onClick)="login()">
        </p-button>

        <p class="toggle-text">
          Nemáte účet? 
          <a (click)="zmenitForm()">Registrovat</a>
        </p>
      </div>
    } @else {
      <!-- Registrace -->
      <div class="login-form">
        <div class="form-row">
          <div class="form-group">
            <label>Jméno</label>
            <input 
              type="text"
              class="form-input"
              placeholder="Zadejte jméno" 
              [formControl]="firstNameRegister">
          </div>

          <div class="form-group">
            <label>Příjmení</label>
            <input 
              type="text"
              class="form-input"
              placeholder="Zadejte příjmení" 
              [formControl]="lastNameRegister">
          </div>
        </div>

        <div class="form-group">
          <label>E-mail</label>
          <input 
            type="email"
            class="form-input"
            placeholder="Zadejte e-mail" 
            [formControl]="mailRegister">
        </div>

        <div class="form-group">
          <label>Heslo</label>
          <div class="password-input">
            <input 
              [type]="hide() ? 'password' : 'text'"
              class="form-input"
              placeholder="Zadejte heslo" 
              [formControl]="passwordRegister">
            <i 
              class="bi password-toggle"
              [class.bi-eye]="hide()"
              [class.bi-eye-slash]="!hide()"
              (click)="clickEvent($event)">
            </i>
          </div>
        </div>

        <p-button 
          label="Registrovat"
          severity="info"
          class="login-btn"
          [loading]="loggingIn"
          (onClick)="register()">
        </p-button>

        <p class="toggle-text">
          Už máte účet? 
          <a (click)="zmenitForm()">Přihlásit</a>
        </p>
      </div>
    }
  </div>
</div>